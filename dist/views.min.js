!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.views=e():t.views=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(3)),r(n(2)),r(n(19)),r(n(5)),r(n(4)),r(n(18)),r(n(17)),r(n(1)),r(n(20)),r(n(21)),r(n(22)),r(n(23)),r(n(16));var i=n(24);e.Collection=i.Collection,e.Model=i.Model},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(2),o=n(17),s=n(7),u=n(18),c=function(t){function e(e){this._regionManager=new o.RegionManager,s.proxy(this,this._regionManager,["removeRegion","removeRegions"]),this._regions=this.getOption("regions",e||{}),t.call(this,e)}return r(e,t),Object.defineProperty(e.prototype,"regions",{get:function(){return this._regionManager.regions},enumerable:!0,configurable:!0}),e.prototype.render=function(e){return this.triggerMethod("before:render"),t.prototype.render.call(this,{silent:!0}),this.addRegion(this._regions||{}),this.triggerMethod("render"),this},e.prototype.addRegion=function(t,e){var n={};if("string"==typeof t){if(null==e)throw new Error("add region");n[t]=e}else n=t;for(var r in n){var i=u.Region.buildRegion(n[r],this.el);this._regionManager.addRegion(r,i)}},e.prototype.removeRegion=function(t){this._regionManager.removeRegion(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._regionManager.destroy()},e}(i.TemplateView);e.LayoutView=c},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(3),o=n(16),s=o.logger("templateview"),u=function(t){function e(e){e&&e.template&&(this.template=e.template),t.call(this,e)}return r(e,t),e.prototype.getTemplateData=function(){return{}},e.prototype.render=function(t){return void 0===t&&(t={}),t.silent||this.triggerMethod("before:render"),this.renderTemplate(this.getTemplateData()),t.silent||this.triggerMethod("render"),this},e.prototype.renderTemplate=function(t){var e=this.getOption("template");"function"==typeof e&&(s("%s render template function",this.cid),e=e.call(this,t)),e&&"string"==typeof e&&(s("%s attach template: %s",this.cid,e),this.attachTemplate(e))},e.prototype.attachTemplate=function(t){this.undelegateEvents(),this.el.innerHTML=t,this.delegateEvents()},e}(i.View);e.TemplateView=u},function(t,e,n){function r(t,e){var n,r,i,o,s,u={};for(n in t)r=t[n],null!==(i=c.exec(n))&&(s=i[1],o=e[s],null!=o&&(n=n.replace(i[0],o))),u[n]=r;return u}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},o=n(4),s=n(16),u=n(7),c=/@ui.([a-zA-Z_\-\$#]+)/i,a=s.logger("view");e.normalizeUIKeys=r;var l=function(t){function e(e){this._options=e,t.call(this,e)}return i(e,t),e.prototype.delegateEvents=function(e){this._bindUIElements(),e=e||this.events,e=r(e,this._ui);var n=this._configureTriggers();return e=u.extend({},e,n),a("%s delegate events %j",this.cid,e),t.prototype.delegateEvents.call(this,e),this},e.prototype.undelegateEvents=function(){return this._unbindUIElements(),a("%s undelegate events",this.cid),t.prototype.undelegateEvents.call(this),this},e.prototype._bindUIElements=function(){var t=this,e=this.getOption("ui");e&&(this._ui||(this._ui=e),e=u.result(this,"_ui"),this.ui={},Object.keys(e).forEach(function(n){var r=t.$(e[n]);r&&r.length?(r instanceof NodeList&&(r=r[0]),a("added ui element %s %s",n,e[n]),t.ui[n]=r):console.warn("view ",t.cid,": ui element not found ",n,e[n])}))},e.prototype._unbindUIElements=function(){},e.prototype._configureTriggers=function(){var t=this.getOption("triggers")||{};"function"==typeof t&&(t=t.call(this)),t=r(t,this._ui);var e,n,i={};for(n in t)e=t[n],a("added trigger %s %s",n,e),i[n]=this._buildViewTrigger(e);return i},e.prototype._buildViewTrigger=function(t){"string"==typeof t&&(t={event:t});var e=u.extend({preventDefault:!0,stopPropagation:!0},t);return function(t){t&&(t.preventDefault&&e.preventDefault&&t.preventDefault(),t.stopPropagation&&e.stopPropagation&&t.stopPropagation()),this.triggerMethod(e.event,{view:this,model:this.model,collection:this.collection})}},e}(o.BaseView);e.View=l},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(5),o=n(7),s=n(16),u=s.logger("baseview"),c=/^\s*</,a="focus blur change".split(" "),l=["el","id","attributes","className","tagName","events"],h=function(t){function e(e){void 0===e&&(e={}),this._cid=o.uniqueId("view"),o.extend(this,o.pick(e,l)),this._domEvents=[],null==this.el?this._ensureElement():this.delegateEvents(),t.call(this,e)}return r(e,t),e.find=function(t,e){return e.querySelectorAll(t)},Object.defineProperty(e.prototype,"cid",{get:function(){return this._cid},enumerable:!0,configurable:!0}),e.prototype.delegateEvents=function(t){var e=this;if(!t&&!(t=o.result(this,"events")))return this;this.undelegateEvents();var n=[];for(var r in t){var i=t[r];"function"!=typeof i&&(i=this[i]);var s=r.match(/^(\S+)\s*(.*)$/),u=o.bind(i,this);s[2]?this.delegate(s[1],s[2],u):n.push([s[1],u])}return n.forEach(function(t){e.delegate(t[0],t[1])}),this},e.prototype.undelegateEvents=function(){if(this.el){for(var t=0,e=this._domEvents.length;e>t;t++){var n=this._domEvents[t];o.removeEventListener(this.el,n.eventName,n.handler)}this._domEvents.length=0}return this},e.prototype.delegate=function(t,e,n){"function"==typeof e&&(n=e,e=null);var r=this.el,i=e?function(t){var i=t.target||t.srcElement;if(!t.delegateTarget)for(;i&&i!=r;i=i.parentNode)o.matches(i,e)&&(t.delegateTarget=i,n(t))}:function(t){t.delegateTarget||n(t)},s=!!~a.indexOf(t)&&null!=e;return u("%s delegate event %s ",this.cid,t),o.addEventListener(this.el,t,i,s),this._domEvents.push({eventName:t,handler:i,listener:n,selector:e}),i},e.prototype.undelegate=function(t,e,n){if("function"==typeof e&&(n=e,e=null),this.el)for(var r=this._domEvents.slice(),i=0,s=r.length;s>i;i++){var u=r[i],c=u.eventName===t&&(n?u.listener===n:!0)&&(e?u.selector===e:!0);c&&(o.removeEventListener(this.el,u.eventName,u.handler),this._domEvents.splice(o.indexOf(r,u),1))}return this},e.prototype.render=function(t){return this},e.prototype.appendTo=function(t){if(t instanceof HTMLElement)t.appendChild(this.el);else{var e=document.querySelector(t);e?e.appendChild(this.el):void 0}return this},e.prototype.append=function(t,e){if(null!=e){var n=this.$(e);n instanceof NodeList&&n.length>0?n[0].appendChild(t):n instanceof HTMLElement&&n.appendChild(t)}else this.el.appendChild(t);return this},e.prototype.$=function(t){return t instanceof HTMLElement?t:e.find(t,this.el)},e.prototype.setElement=function(t){this.undelegateEvents(),this._setElement(t),this.delegateEvents()},e.prototype.remove=function(){return this._removeElement(),this},e.prototype._createElement=function(t){return document.createElement(t)},e.prototype._ensureElement=function(){if(this.el)this.setElement(o.result(this,"el"));else{var t=o.extend({},o.result(this,"attributes"));this.id&&(t.id=o.result(this,"id")),this.className&&(t["class"]=o.result(this,"className")),u("%s created element: %s",this.cid,o.result(this,"tagName")||"div"),this.setElement(this._createElement(o.result(this,"tagName")||"div")),this._setAttributes(t)}},e.prototype._removeElement=function(){this.undelegateEvents(),this.el.parentNode&&this.el.parentNode.removeChild(this.el)},e.prototype._setElement=function(t){if("string"==typeof t)if(c.test(t)){var e=document.createElement("div");e.innerHTML=t,this.el=e.firstElementChild}else this.el=document.querySelector(t);else this.el=t},e.prototype._setAttributes=function(t){for(var e in t)e in this.el?this.el[e]=t[e]:this.el.setAttribute(e,t[e])},e}(i.BaseObject);e.BaseView=h},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(6),o=n(7),s=n(16),u=s.logger("object"),c=function(t){function e(e){t.call(this),this._isDestroyed=!1,"function"==typeof this.initialize&&o.callFunc(this.initialize,this,o.slice(arguments))}return r(e,t),Object.defineProperty(e.prototype,"isDestroyed",{get:function(){return this._isDestroyed},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy"),this.stopListening(),this.off(),this._isDestroyed=!0,this.triggerMethod("destroy"),u("%s destroy",this),Object.freeze(this),this)},e.prototype.triggerMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o.triggerMethodOn(this,t,e),this},e.prototype.getOption=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.options&&e.push(this.options),this._options&&e.push(this._options),e.push(this),o.getOption(t,e)},e.extend=function(t,e){return o.inherits(this,t,e)},e}(i.EventEmitter);e.BaseObject=c},function(t,e){function n(){return""+ ++i}function r(t,e,n){void 0===n&&(n=[]);var r=t.length,i=-1,o=n[0],s=n[1],u=n[2],c=n[3];switch(n.length){case 0:for(;++i<r;)t[i].call(e);return;case 1:for(;++i<r;)t[i].call(e,o);return;case 2:for(;++i<r;)t[i].call(e,o,s);return;case 3:for(;++i<r;)t[i].call(e,o,s,u);return;case 4:for(;++i<r;)t[i].call(e,o,s,u,c);return;default:for(;++i<r;)t[i].apply(e,n);return}}var i=0;e.callFunc=r;var o=function(){function t(){}return Object.defineProperty(t.prototype,"listeners",{get:function(){return this._listeners},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===r&&(r=!1);var i=(this._listeners||(this._listeners={}))[t]||(this._listeners[t]=[]);return i.push({name:t,once:r,handler:e.bind(n||this)}),this},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){if(this._listeners=this._listeners||{},null==t)this._listeners={};else if(this._listeners[t]){var n=this._listeners[t];if(null==e)this._listeners[t]=[];else for(var r=0;r<n.length;r++){{n[r]}n[r].handler==e&&this._listeners[t].splice(r,1)}}},t.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(this._listeners||(this._listeners={}))[e]||(this._listeners[e]=[]).concat(this._listeners.all||[]);t.debugCallback&&t.debugCallback(this.constructor.name,this.name,e,n);var s,u,c,a,l=(o.length,[]);for(a=0;a<o.length;a++)s=o[a],u=n,"all"==s.name&&(u=[e].concat(n),r([s.handler],s.ctx,u)),l.push(s.handler),s.once===!0&&(c=this._listeners[s.name].indexOf(s),this._listeners[s.name].splice(c,1));return this._executeListener(l,void 0,n),r(l,void 0,n),this},t.prototype._executeListener=function(t,e,n){var i=r;this.constructor.executeListenerFunction&&(i=this.constructor.executeListenerFunction),i(t,e,n)},t.prototype.listenTo=function(t,e,r,i,o){void 0===o&&(o=!1);var s,u,c;return s=this._listeningTo||(this._listeningTo={}),u=t.listenId||(t.listenId=n()),s[u]=t,c=o?"once":"on",t[c](e,r,this),this},t.prototype.listenToOnce=function(t,e,n,r){return this.listenTo(t,e,n,r,!0)},t.prototype.stopListening=function(t,e,n){var r=this._listeningTo||{},i=!e&&!n;t&&(r[t.listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(i||!Object.keys(t.listeners).length)&&delete this._listeningTo[o];return this},t.prototype.destroy=function(){this.stopListening(),this.off()},t.executeListenerFunction=function(){},t}();e.EventEmitter=o},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(9)),r(n(11)),r(n(12)),r(n(10)),r(n(8)),r(n(13)),r(n(14)),r(n(15))},function(t,e){function n(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function r(t,e){var n=t.substring(0,Math.min(e,t.length));return n+(n.length==t.length?"":"...")}function i(t,e){void 0===e&&(e=!1);var n=e?1e3:1024;if(Math.abs(t)<n)return t+" B";var r=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do t/=n,++i;while(Math.abs(t)>=n&&i<r.length-1);return t.toFixed(1)+" "+r[i]}e.camelcase=n,e.truncate=r,e.humanFileSize=i},function(t,e,n){function r(t){return t.filter(function(e,n){for(n+=1;n<t.length;n+=1)if(l.equal(e,t[n]))return!1;return!0})}function i(t,e){for(var n=0,r=t.length;r>n;n++)if(e(t[n]))return!0;return!1}function o(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function s(t,e,n){var r,i;for(r=0;r<t.length;r++)if(i=t[r],e.call(n,i))return i;return null}function u(t,e,n){return Array.prototype.slice.call(t,e,n)}function c(t){return t.reduce(function(t,e){return t.concat(Array.isArray(e)?c(e):e)},[])}function a(t,e,n){var r="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}).map(function(t){return t.value})}var l=n(10);e.unique=r,e.any=i,e.indexOf=o,e.find=s,e.slice=u,e.flatten=c,e.sortBy=a},function(t,e,n){function r(){var t;if(window.hasOwnProperty("XMLHttpRequest"))return new XMLHttpRequest;try{return new ActiveXObject("msxml2.xmlhttp.6.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp.3.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp")}catch(e){t=e}return t}function i(t){return void 0===t&&(t=""),t+ ++v}function o(t,e,n){Array.isArray(n)||(n=[n]),n.forEach(function(n){"function"==typeof e[n]&&(t[n]=s(e[n],e))})}function s(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if("function"!=typeof t)throw new Error("method not at function");if(null!=y)return y.call.apply(y,[t,e].concat(n));n=n||[];var i=function(){},o=function(){var r=this instanceof i?this:e;return u(t,r,n.concat(d.slice(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}function u(t,e,n){switch(void 0===n&&(n=[]),n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);default:return t.apply(e,n)}}function c(t,e){return f(t,e,[],[])}function a(t,e,n){var r=g.camelcase("on-"+e.replace(":","-"));t[r]&&"function"==typeof t[r]&&u(t[r],t,n),"function"==typeof t.trigger&&(n=[e].concat(n),u(t.trigger,t,n))}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(p.isObject(r)&&r[t])return r[t]}return null}function h(t,e,n){var r;r=e&&p.has(e,"constructor")?e.constructor:function(){return t.apply(this,arguments)},p.extend(r,t,n);var i=function(){this.constructor=r};return i.prototype=t.prototype,r.prototype=new i,e&&p.extend(r.prototype,e),r.__super__=t.prototype,r}function f(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var i=toString.call(t);if(i!=toString.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t===1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var s=t.constructor,u=e.constructor;if(s!==u&&!("function"==typeof s&&s instanceof s&&"function"==typeof u&&u instanceof u))return!1;n.push(t),r.push(e);var c=0,a=!0;if("[object Array]"===i){if(c=t.length,a=c===e.length)for(;c--&&(a=f(t[c],e[c],n,r)););}else{for(var l in t)if(p.has(t,l)&&(c++,!(a=p.has(e,l)&&f(t[l],e[l],n,r))))break;if(a){for(l in e)if(p.has(e,l)&&!c--)break;a=!c}}return n.pop(),r.pop(),a}var p=n(11),d=n(9),g=n(8),v=0,y=Function.prototype.bind;e.ajax=r,e.uniqueId=i,e.proxy=o,e.bind=s,e.callFunc=u,e.equal=c,e.triggerMethodOn=a,e.getOption=l,e.inherits=h,e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}()},function(t,e,n){function r(t){return t===Object(t)}function i(t){return 0===Object.keys(t).length}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!r(t))return t;for(var i,o,s=0;s<e.length;s++)if(i=e[s],r(i))for(o in i)u(i,o)&&(t[o]=i[o]);return t}function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),i=0,o=e.length;o>i;i++){var s=e[i];if(void 0!==s&&null!==s){s=Object(s);for(var u=Object.keys(Object(s)),c=0,a=u.length;a>c;c++){var l=u[c],h=Object.getOwnPropertyDescriptor(s,l);void 0!==h&&h.enumerable&&(r[l]=s[l])}}}return r}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n,r={},i=0;i<e.length;i++)n=e[i],u(t,n)&&(r[n]=t[n]);return r}function a(t,e,n,r){var i=t[e];return"function"==typeof i?p.callFunc(i,n,r||[]):i}function l(t){var e=[];for(var n in t)u(t,n)&&e.push(t[n]);return e}function h(t,e,n){for(var r,i,o=[],s=0,u=t.length;u>s;s++)r=t[s],i=d.any(e,function(t){return n(t,r)}),i&&o.push(r);return o}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[e.length-1],i=e.length,o=p.equal;"function"==typeof r&&(o=r,i--);for(var s=0;i>s;s++){var u=e[s];if(t=h(t,u,o),0===t.length)break}return t}var p=n(10),d=n(9);e.isObject=r,e.isEmpty=i,e.extend=o,e.assign=s,e.has=u,e.pick=c,e.result=a,e.values=l,e.intersection=f},function(t,e,n){function r(t){return t&&"function"==typeof t.then}function i(t){return t?r(t)?t:"function"==typeof t?o.call(this,t):Array.isArray(t)?s.call(this,t):p.isObject(t)?u.call(this,t):e.Promise.resolve(t):t}function o(t){var n=this;return new e.Promise(function(e,r){t.call(n,function(t,n){return t?r(t):(arguments.length>2&&(n=d.slice(arguments,1)),void e(n))})})}function s(t){return e.Promise.all(t.map(i,this))}function u(t){function n(t,e){o[e]=void 0,u.push(t.then(function(t){o[e]=t}))}for(var o=new t.constructor,s=Object.keys(t),u=[],c=0;c<s.length;c++){var a=s[c],l=i.call(this,t[a]);l&&r(l)?n(l,a):o[a]=t[a]}return e.Promise.all(u).then(function(){return o})}function c(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o={};return o.promise=new e.Promise(function(t,e){o.resolve=t,o.reject=e,o.done=function(n,r){return n?e(n):void t(r)}}),"function"==typeof t?(g.callFunc(t,n,r.concat([o.done])),o.promise):o}function a(t,e,n){t.then(function(t){e.call(n,null,t)})["catch"](function(t){e.call(n,t)})}function l(t){var e=c();return null==t?g.nextTick(e.resolve):setTimeout(e.resolve,t),e.promise}function h(t,e,n,r){return void 0===r&&(r=!1),f(t,e,n,r).then(function(){return void 0})}function f(t,n,i,o){return void 0===o&&(o=!1),new e.Promise(function(e,s){function u(f,p){if(f&&!o)return s(f);if(f&&l.push(f),c===a)return l.length?s(d.flatten(l)):e(h);var g=n.call(i,t[c++]);r(g)?g.then(function(t){h.push(t),u(null,t)},u):u(g instanceof Error?g:null)}var c=0,a=t.length,l=[],h=[];u(null)})}var p=n(11),d=n(9),g=n(10);e.Promise=window.Promise,e.isPromise=r,e.toPromise=i,e.thunkToPromise=o,e.arrayToPromise=s,e.objectToPromise=u,e.deferred=c,e.callback=a,e.delay=l,e.eachAsync=h,e.mapAsync=f},function(t,e,n){function r(t,e){return v.call(t,e)}function i(t,e,n,r){void 0===r&&(r=!1),y.call(t,e,n,r)}function o(t,e,n){m.call(t,e,n)}function s(t,e,n,o,s){var u=t,c=function(t){var n=t.target||t.srcElement;if(!t.delegateTarget)for(;n&&n!=u;n=n.parentNode)r(n,e)&&(t.delegateTarget=n,o(t))},a=!!~w.indexOf(n);return i(t,n,c,a),E.push({eventName:n,handler:c,listener:o,selector:e}),c}function u(t,e,n,r){for(var i=E.slice(),s=0,u=i.length;u>s;s++){var c=i[s],a=c.eventName===n&&(r?c.listener===r:!0)&&(e?c.selector===e:!0);a&&(o(t,c.eventName,c.handler),E.splice(d.indexOf(i,c),1))}}function c(t,e){t.classList?t.classList.add(e):t.className=t.className.split(" ").concat(e.split(" ")).join(" ")}function a(t,e){if(t.classList)t.classList.remove(e);else for(var n,r=t.className.split(" "),i=e.split(" "),o=0,s=i.length;s>o;o++)n=r.indexOf(i[o]),~n&&(r=r.splice(n,1))}function l(t,e){if(t.classList)return t.classList.contains(e);var n=new RegExp("\b"+e);return n.test(t.className)}function h(t){if("selectionStart"in t)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange(),n=document.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-n}}function f(t,e,n,r){var s=O.transitionEnd||(O.transitionEnd=_()),u=function(r){o(t,s,u),e.call(n,r)};i(t,s,u)}function p(t,e,n,r){var s=O.animationEnd||(O.animationEnd=b()),u=function(r){o(t,s,u),e.call(n,r)};i(t,s,u)}var d=n(9),g="undefined"!=typeof Element&&Element.prototype||{},v=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||function(t){var e=(this.parentNode||document).querySelectorAll(t)||[];return!!~d.indexOf(e,this)},y=g.addEventListener||function(t,e){return this.attachEvent("on"+t,e)},m=g.removeEventListener||function(t,e){return this.detachEvent("on"+t,e)},_=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return e[n];return null},b=function(){var t=document.createElement("bootstrap"),e={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in e)if(void 0!==t.style[n])return e[n];return null};e.matches=r,e.addEventListener=i,e.removeEventListener=o;var w="focus blur change".split(" "),E=[];e.delegate=s,e.undelegate=u,e.addClass=c,e.removeClass=a,e.hasClass=l,e.selectionStart=h;var O={animationEnd:null,transitionEnd:null};e.transitionEnd=f,e.animationEnd=p,e.domReady=function(){var t,e=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,t=function(){for(n.removeEventListener(i,t),o=!0;t=e.shift();)t()}),function(t){o?setTimeout(t,0):e.push(t)}}()},function(t,e,n){function r(t){return"?"+Object.keys(t).reduce(function(e,n){return e.push(n+"="+encodeURIComponent(t[n])),e},[]).join("&")}var i=n(10),o=n(12),s=/^application\/json/,u=/^file:/;e.queryParam=r;var c=function(t,e){return t.status>=200&&t.status<300||304===t.status||0===t.status&&u.test(e)},a=function(){function t(t,e){this._method=t,this._url=e,this._xhr=i.ajax()}return t.prototype.send=function(t){return this._data=t,this},t.prototype.withCredentials=function(t){return this._xhr.withCredentials=t,this},t.prototype.end=function(t){var e=this;this._data=t||this._data;var n=o.deferred();this._xhr.addEventListener("readystatechange",function(){return e._xhr.readyState===XMLHttpRequest.DONE?c(e._xhr,e._url)?void n.resolve(e._xhr.responseText):n.reject(new Error("server responded with: "+e._xhr.status)):void 0}),t=this._data;var i=this._url;if(t&&t===Object(t)){var s=r(t);i+=s}return this._xhr.open(this._method,i,!0),this._xhr.send(t),n.promise},t.prototype.json=function(t){var e=this;return this.end(t).then(function(t){var n=e._xhr.getResponseHeader("content-type");if(s.test(n)&&""!==t){var r=JSON.parse(t);return r}throw new Error("json")})},t.prototype.progress=function(t){return this._xhr.addEventListener("progress",t),this},t.prototype.header=function(t,e){return this._xhr.setRequestHeader(t,e),this},t}();e.Request=a;var l;!function(t){function e(t){return new a("GET",t)}function n(t){return new a("POST",t)}function r(t){return new a("PUT",t)}function i(t){return new a("DELETE",t)}t.get=e,t.post=n,t.put=r,t.del=i}(l=e.request||(e.request={}))},function(t,e,n){function r(t){return o.create(t)}var i=n(10),o=function(){function t(t){this.enabled=!1,this.namespace=t}return t.enable=function(t,e){for(var n in this.loggers)e&&n===e?this.loggers[n].enabled=t:e||(this.loggers[n].enabled=t)},t.create=function(e){var n;return this.loggers[e]?n=this.loggers[e].debug:(n=new t(e),this.loggers[e]=n),i.bind(n.debug,n)},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(this.enabled){e[0]=this._coerce(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var r=0;e[0]=e[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;r++;var o=t.formatters[i];if("function"==typeof o){var s=e[r];n=o.call(self,s),e.splice(r,1),r--}return n}),e=this._formatArgs(e),this._log.apply(this,e)}},t.prototype._log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.prototype._coerce=function(t){return t instanceof Error?t.stack||t.message:t},t.prototype._formatArgs=function(t){return t[0]="[templ:"+this.namespace+"] "+t[0],t},t.loggers={},t.formatters={j:function(t){return JSON.stringify(t)}},t}();e.Debug=o,e.debug=r},function(t,e,n){function r(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(t){a=t}function o(t){return t instanceof Error?t.stack||t.message:t}function s(t){var e=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(a){e[0]=o(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var i=0;e[0]=e[0].replace(/%([a-z%])/g,function(t,n){if("%%"===t)return t;i++;var r=l[n];if("function"==typeof r){var o=e[i];t=r.call(self,o),e.splice(i,1),i--}return t}),e=u(t,e),c.callFunc(r,null,e)}};return e}function u(t,e){return e[0]="[views:"+t+"] "+e[0],e}var c=n(7),a=!1;e.debug=i;var l={j:function(t){return JSON.stringify(t)}};e.logger=s},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(5),o=n(18),s=n(7),u=function(t){function e(){t.call(this),this._regions={}}return r(e,t),Object.defineProperty(e.prototype,"regions",{get:function(){return this._regions},enumerable:!0,configurable:!0}),e.prototype.addRegions=function(t){var e,n={},r=Object.keys(t);return r.forEach(function(r){e=t[r],n[r]=this.addRegion(r,e)},this),n},e.prototype.addRegion=function(t,e){var n=o.Region.buildRegion(e);return this._setRegion(t,n),n},e.prototype.removeRegion=function(t){"string"==typeof t&&(t=[t]),t.forEach(function(t){if(s.has(this.regions,t)){var e=this.regions[t];e.destroy(),this._unsetRegion(t)}},this)},e.prototype.destroy=function(){this.removeRegions(),t.prototype.destroy.call(this)},e.prototype.removeRegions=function(){s.callFunc(this.removeRegion,this,Object.keys(this._regions))},e.prototype._setRegion=function(t,e){this._regions[t]&&this._regions[t].destroy(),this._regions[t]=e},e.prototype._unsetRegion=function(t){delete this._regions[t]},e}(i.BaseObject);e.RegionManager=u},function(t,e,n){function r(t,e){if(void 0===t&&(t={}),!t.selector)throw new Error("No selector specified: "+t);return i(t.selector,t.regionClass||c,e)}function i(t,e,n){void 0===e&&(e=c),n=n||document;var r=n.querySelector(t);if(!r)throw new Error("selector must exist in the dom");return new e({el:r})}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},s=n(5),u=n(7),c=function(t){function e(e){this.options=e,this._el=this.getOption("el"),t.call(this)}return o(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},set:function(t){this.show(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"el",{get:function(){return this._el},enumerable:!0,configurable:!0}),e.buildRegion=function(t,n){return void 0===n&&(n=null),t instanceof e?t:"string"==typeof t?i(t,e,n):r(t,n)},e.prototype.show=function(t,e){var n=t!==this._view;return n&&(this.empty(),t.once("destroy",this.empty,this),t.render(),u.triggerMethodOn(t,"before:show"),this._attachHtml(t),u.triggerMethodOn(t,"show"),this._view=t),this},e.prototype.destroy=function(){this.empty(),t.prototype.destroy.call(this)},e.prototype.empty=function(){if(this._view){var t=this._view;return t.off("destroy",this.empty,this),this.trigger("before:empty",t),this._destroyView(),this.trigger("empty",t),delete this._view,this}},e.prototype._attachHtml=function(t){this._el.innerHTML="",this._el.appendChild(t.el)},e.prototype._destroyView=function(){var t=this._view;t.destroy&&"function"==typeof t.destroy&&!t.isDestroyed?t.destroy():t.remove&&"function"==typeof t.remove&&t.remove(),this._el.innerHTML=""},e}(s.BaseObject);e.Region=c},function(t,e){function n(){return""+ ++r}var r=0,i=function(){function t(){}return Object.defineProperty(t.prototype,"listeners",{get:function(){return this._listeners},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===r&&(r=!1);var i=(this._listeners||(this._listeners={}))[t]||(this._listeners[t]=[]);return i.push({name:t,once:r,handler:e,ctx:n||this}),this},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){if(null==t)this._listeners={};else if(this._listeners[t]){var n=this._listeners[t];if(null==e)this._listeners[t]=[];else for(var r=0;r<n.length;r++){{n[r]}n[r].handler==e&&this._listeners[t].splice(r,1)}}},t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=(this._listeners||(this._listeners={}))[e]||(this._listeners[e]=[]);i=i.concat(this._listeners.all||[]),t.debugCallback&&t.debugCallback(this.constructor.name,this.name,e,n);{var o,s,u,c;i.length}for(c=0;c<i.length;c++)o=i[c],s=n,"all"==o.name&&(s=[e].concat(n)),o.handler.apply(o.ctx,s),o.once===!0&&(u=this._listeners[o.name].indexOf(o),this._listeners[o.name].splice(u,1));return this},t.prototype.listenTo=function(t,e,r,i,o){void 0===o&&(o=!1);var s,u,c;return s=this._listeningTo||(this._listeningTo={}),u=t.listenId||(t.listenId=n()),s[u]=t,c=o?"once":"on",t[c](e,r,this),this},t.prototype.listenToOnce=function(t,e,n,r){return this.listenTo(t,e,n,r,!0)},t.prototype.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;var i=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t.listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(i||!Object.keys(t.listeners).length)&&delete this._listeningTo[o];return this},t}();e.EventEmitter=i},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(2),o=n(7),s=function(t){function e(e){void 0===e&&(e={}),e.model&&(this.model=e.model),e.collection&&(this.collection=e.collection),t.call(this,e)}return r(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){this.setModel(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collection",{get:function(){return this._collection},set:function(t){this.setCollection(t)},enumerable:!0,configurable:!0}),e.prototype.setModel=function(t){this._model!==t&&(this.triggerMethod("before:model",this._model,t),this._model&&this.stopListening(this._model),this._model=t,this.triggerMethod("model",t))},e.prototype.setCollection=function(t){this._collection!==t&&(this.triggerMethod("before:collection",this._collection,t),this._collection&&this.stopListening(this._collection),
this._collection=t,this.triggerMethod("collection",t))},e.prototype.getTemplateData=function(){return this.model?"function"==typeof this.model.toJSON?this.model.toJSON():this.model:{}},e.prototype.delegateEvents=function(e){e=e||this.events;var n=this._filterEvents(e),r=n.c,i=n.e,o=n.m;return t.prototype.delegateEvents.call(this,i),this._delegateDataEvents(o,r),this},e.prototype.undelegateEvents=function(){return this._undelegateDataEvents(),t.prototype.undelegateEvents.call(this),this},e.prototype._delegateDataEvents=function(t,e){var n=this;this._dataEvents={};var r=function(t,e){if(!n[t])return{};var r,i,s={};for(r in e)i=o.bind(e[r],n),n[t].on(r,i),s[t+":"+r]=i;return s};o.extend(this._dataEvents,r("model",t),r("collection",e))},e.prototype._undelegateDataEvents=function(){if(this._dataEvents){var t,e;for(t in this._dataEvents){e=this._dataEvents[t];var n=t.split(":"),r=n[0],i=n[1];this[r]&&this[r].off(i,e)}delete this._dataEvents}},e.prototype._filterEvents=function(t){var e,n,r={},i={},o={};for(e in t){var s=e.split(" "),u=s[0],c=s[1];u=u.trim(),c=c?c.trim():"",n=t[e],"collection"===c?r[u]=n:"model"===c?i[u]=n:o[e]=n}return{c:r,m:i,e:o}},e}(i.TemplateView);e.DataView=s},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(20),o=n(7),s=n(6),u=n(16),c=u.logger("collectionview"),a=function(){function t(){this.children=[],this.buffer=document.createDocumentFragment()}return t.prototype.append=function(t){this.children.push(t),this.buffer.appendChild(t.el)},t}(),l=function(t){function e(e){this.children=[],this.sort=e&&null!=e.sort?e.sort:!0,t.call(this,e)}return r(e,t),e.prototype.render=function(e){return this.destroyChildren(),this._destroyContainer(),t.prototype.render.call(this,e),this._initContainer(),this.collection&&this.collection.length&&this.renderCollection(),this},e.prototype.setCollection=function(e){t.prototype.setCollection.call(this,e),this._delegateCollectionEvents()},e.prototype.renderCollection=function(){this.destroyChildren(),0!=this.collection.length?(this.hideEmptyView(),this._startBuffering(),this._renderCollection(),this._stopBuffering()):this.showEmptyView()},e.prototype.getChildView=function(t){var e=this.getOption("childView")||i.DataView,n=this.getOption("childViewOptions")||{};return new e(o.extend({model:t},n))},e.prototype.renderChildView=function(t,e){this.triggerMethod("before:render:child",t),c("%s render child: %s",this.cid,t.cid),t.render(),this._attachHTML(t,e),this.triggerMethod("render:child",t)},e.prototype.showEmptyView=function(){var t=this.getOption("emptyView");if(null!=t){var e=new t;this._emptyView=e,this._container.appendChild(e.render().el)}},e.prototype.hideEmptyView=function(){this._emptyView&&(this._emptyView.destroy(),this._emptyView.remove(),this._emptyView=void 0)},e.prototype.destroyChildren=function(){this._container&&(this._container.innerHTML=""),0!==this.children.length&&(this.children.forEach(this.removeChildView,this),this.children=[])},e.prototype.removeChildView=function(t){t&&("function"==typeof t.destroy&&t.destroy(),"function"==typeof t.remove&&t.remove(),this.stopListening(t),this.children.splice(this.children.indexOf(t),1),0===this.children.length&&this.showEmptyView(),this._updateIndexes(t,!1))},e.prototype.destroy=function(){return this.triggerMethod("before:destroy:children"),this.destroyChildren(),this.triggerMethod("destroy:children"),this.hideEmptyView(),t.prototype.destroy.call(this)},e.prototype._renderCollection=function(){var t=this;this.triggerMethod("before:render:collection"),this.collection.forEach(function(e,n){var r=t.getChildView(e);t._appendChild(r,n)}),this.triggerMethod("render:collection")},e.prototype._appendChild=function(t,e){this._updateIndexes(t,!0,e),this._proxyChildViewEvents(t),c("%s append child %s at index: %s",this.cid,t.cid,e),this.children.push(t),this.hideEmptyView(),this.renderChildView(t,e),this.triggerMethod("add:child",t)},e.prototype._attachHTML=function(t,e){this._buffer?(c("%s attach to buffer: %s",this.cid,t.cid),this._buffer.append(t)):this._insertBefore(t,e)||this._insertAfter(t)},e.prototype._proxyChildViewEvents=function(t){var e=this.getOption("prefix")||"childview";this.listenTo(t,"all",function(){var n=o.slice(arguments);n[0]=e+":"+n[0],n.splice(1,0,t),o.callFunc(this.triggerMethod,this,n)})},e.prototype._updateIndexes=function(t,e,n){this.sort&&(e&&(t._index=n),this.children.forEach(function(n){n._index>=t._index&&(e?n._index++:n._index--)}))},e.prototype._startBuffering=function(){this._buffer=new a},e.prototype._stopBuffering=function(){this._container.appendChild(this._buffer.buffer),delete this._buffer},e.prototype._initContainer=function(){var t=this.getOption("childViewContainer");t=t?this.$(t)[0]:this.el,this._container=t},e.prototype._destroyContainer=function(){this._container&&delete this._container},e.prototype._insertBefore=function(t,e){var n,r=this.sort&&e<this.children.length-1;return r&&(n=o.find(this.children,function(t){return t._index===e+1})),n?(this._container.insertBefore(t.el,n.el),!0):!1},e.prototype._insertAfter=function(t){this._container.appendChild(t.el)},e.prototype._delegateCollectionEvents=function(){this.collection&&this.collection instanceof s.EventEmitter&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._onCollectionSort))},e.prototype._onCollectionAdd=function(t){var e=this.getChildView(t),n=this.collection.indexOf(t);this._appendChild(e,n)},e.prototype._onCollectionRemove=function(t){var e=o.find(this.children,function(e){return e.model===t});this.removeChildView(e)},e.prototype._onCollectionSort=function(){var t=this,e=this.collection.find(function(e,n){var r=o.find(t.children,function(t){return t.model===e});return!r||r._index!==n});e&&this.render()},e}(i.DataView);e.CollectionView=l},function(t,e){},function(t,e,n){function r(t){return function(e){s.extend(e.prototype,t)}}function i(t){return function(e){e.prototype.events=t}}function o(t){return function(e){e.prototype.triggers=t}}var s=n(7);e.attributes=r,e.events=i,e.triggers=o},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(25)),r(n(32)),r(n(33)),r(n(34))},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(26),o=n(32),s=n(29),u=n(30),c=n(28),a={add:!0,remove:!0,merge:!0},l={add:!0,remove:!1},h=function(t){function e(e,n){void 0===n&&(n={}),this.options=n,this.options.model&&(this.Model=this.options.model),e&&this.add(e),t.call(this)}return r(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.models.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Model",{get:function(){return this._model||(this._model=o.Model),this._model},set:function(t){this._model=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"models",{get:function(){return this._models||(this._models=[])},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){var n=this;void 0===e&&(e={}),Array.isArray(t)?t=t.map(function(t){return t instanceof n.Model?t:n.create(t,{add:!1})}):t instanceof this.Model||(t=this.create(t,{add:!1})),this.set(t,s.extend({merge:!1},e,l))},e.prototype.set=function(t,e){void 0===e&&(e={}),e=s.extend({},a,e),e.parse&&(t=this.parse(t,e));var n,r,i,o,u,c,l,h=!Array.isArray(t),f=h?t?[t]:[]:t.slice(),p=e.at,d=this.comparator&&null==p&&e.sort!==!1,g="string"==typeof this.comparator?this.comparator:null,v=[],y=[],m={},_=e.add,b=e.merge,w=e.remove,E=!d&&_&&w?[]:null;for(n=0,r=f.length;r>n;n++){if(o=f[n],i=o.get(o.idAttribute)||o.uid,c=this.get(i))w&&(m[c.uid]=!0),b&&(u=o.toJSON(),c.set(u,e),d&&!l&&c.hasChanged(g)&&(l=!0)),f[n]=c;else if(_){if(f[n]=o,!o)continue;v.push(o),this._addReference(o,e)}o=c||o,E&&!m[o.id]&&E.push(o),m[o.uid]=!0}if(w){for(n=0,r=this.length;r>n;++n)m[(o=this.models[n]).uid]||y.push(o);y.length&&this.remove(y,e)}if(v.length||E&&E.length)if(d&&(l=!0),null!=p)for(n=0,r=v.length;r>n;n++)this.models.splice(p+n,0,v[n]);else{E&&(this.models.length=0);var O=E||v;for(n=0,r=O.length;r>n;n++)this.models.push(O[n])}if(l&&this.sort({silent:!0}),!e.silent){for(n=0,r=v.length;r>n;n++)(o=v[n]).trigger("add",o,this,e);(l||E&&E.length)&&this.trigger("sort",this,e),(v.length||y.length)&&this.trigger("update",this,e)}return h?f[0]:f},e.prototype.remove=function(t,e){void 0===e&&(e={});var n=!Array.isArray(t);t=n?[t]:t.slice();var r,i,o,s;for(r=0,i=t.length;i>r;r++)s=t[r]=this.get(t[r]),s&&(o=this.indexOf(s),this.models.splice(o,1),e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s,e));return n?t[0]:t},e.prototype.get=function(t){return this.find(t)},e.prototype.at=function(t){return this.models[t]},e.prototype.clone=function(t){return t=t||this.options,new this.constructor(this.models,t)},e.prototype.sort=function(t){if(void 0===t&&(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");return"string"==typeof this.comparator||1===this.comparator.length?this._models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this},e.prototype.sortBy=function(t,e){return u.sortBy(this._models,t,e)},e.prototype.push=function(t,e){return void 0===e&&(e={}),this.add(t,s.extend({at:this.length},e))},e.prototype.reset=function(t,e){var n=this;return void 0===e&&(e={}),this.forEach(function(t){n._removeReference(t,e)}),e.previousModels=this.models,this._reset(),t=this.add(t,e),e.silent||this.trigger("reset",this,e),t},e.prototype.create=function(t,e){void 0===e&&(e={add:!0});var n=new this.Model(t,e);return e.add&&this.add(n),n},e.prototype.parse=function(t,e){return void 0===e&&(e={}),t},e.prototype.find=function(t){var e;return e="function"==typeof t?u.find(this.models,t):u.find(this.models,function(e){return e.id==t||e.uid==t||t===e})},e.prototype.forEach=function(t,e){for(var n=0,r=this.models.length;r>n;n++)t.call(e||this,this.models[n],n);return this},e.prototype.indexOf=function(t){return this.models.indexOf(t)},e.prototype.toJSON=function(){return this.models.map(function(t){return t.toJSON()})},e.prototype._removeReference=function(t,e){this===t.collection&&delete t.collection,this.stopListening(t)},e.prototype._addReference=function(t,e){t.collection||(t.collection=this),this.listenTo(t,"all",this._onModelEvent)},e.prototype._reset=function(){this._models=[]},e.prototype._onModelEvent=function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),c.callFunc(this.trigger,this,u.slice(arguments)))},e.prototype.destroy=function(){var e=this;this.models.forEach(function(t){"function"==typeof t.destroy&&t.collection==e&&t.destroy()}),t.prototype.destroy.call(this)},e}(i.BaseObject);e.Collection=h},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(27),o=n(28),s=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.extend=function(t,e){return o.inherits(this,t,e)},e}(i.EventEmitter);e.BaseObject=s},function(t,e){function n(){return""+ ++i}function r(t,e,n){void 0===n&&(n=[]);var r=t.length,i=-1,o=n[0],s=n[1],u=n[2],c=n[3];switch(n.length){case 0:for(;++i<r;)t[i].call(e);return;case 1:for(;++i<r;)t[i].call(e,o);return;case 2:for(;++i<r;)t[i].call(e,o,s);return;case 3:for(;++i<r;)t[i].call(e,o,s,u);return;case 4:for(;++i<r;)t[i].call(e,o,s,u,c);return;default:for(;++i<r;)t[i].apply(e,n);return}}var i=0;e.callFunc=r;var o=function(){function t(){}return Object.defineProperty(t.prototype,"listeners",{get:function(){return this._listeners},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===r&&(r=!1);var i=(this._listeners||(this._listeners={}))[t]||(this._listeners[t]=[]);return i.push({name:t,once:r,handler:e.bind(n||this)}),this},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){if(this._listeners=this._listeners||{},null==t)this._listeners={};else if(this._listeners[t]){var n=this._listeners[t];if(null==e)this._listeners[t]=[];else for(var r=0;r<n.length;r++){{n[r]}n[r].handler==e&&this._listeners[t].splice(r,1)}}},t.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(this._listeners||(this._listeners={}))[e]||(this._listeners[e]=[]).concat(this._listeners.all||[]);t.debugCallback&&t.debugCallback(this.constructor.name,this.name,e,n);var s,u,c,a,l=(o.length,[]);for(a=0;a<o.length;a++)s=o[a],u=n,"all"==s.name&&(u=[e].concat(n),r([s.handler],s.ctx,u)),l.push(s.handler),s.once===!0&&(c=this._listeners[s.name].indexOf(s),this._listeners[s.name].splice(c,1));return this._executeListener(l,void 0,n),r(l,void 0,n),this},t.prototype._executeListener=function(t,e,n){var i=r;this.constructor.executeListenerFunction&&(i=this.constructor.executeListenerFunction),i(t,e,n)},t.prototype.listenTo=function(t,e,r,i,o){void 0===o&&(o=!1);var s,u,c;return s=this._listeningTo||(this._listeningTo={}),u=t.listenId||(t.listenId=n()),s[u]=t,c=o?"once":"on",t[c](e,r,this),this},t.prototype.listenToOnce=function(t,e,n,r){return this.listenTo(t,e,n,r,!0)},t.prototype.stopListening=function(t,e,n){var r=this._listeningTo||{},i=!e&&!n;t&&(r[t.listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(i||!Object.keys(t.listeners).length)&&delete this._listeningTo[o];return this},t.prototype.destroy=function(){this.stopListening(),this.off()},t.executeListenerFunction=function(){},t}();e.EventEmitter=o},function(t,e,n){function r(){var t;if(window.hasOwnProperty("XMLHttpRequest"))return new XMLHttpRequest;try{return new ActiveXObject("msxml2.xmlhttp.6.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp.3.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp")}catch(e){t=e}return t}function i(t){return void 0===t&&(t=""),t+ ++v}function o(t,e,n){Array.isArray(n)||(n=[n]),n.forEach(function(n){"function"==typeof e[n]&&(t[n]=s(e[n],e))})}function s(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if("function"!=typeof t)throw new Error("method not at function");if(null!=y)return y.call.apply(y,[t,e].concat(n));n=n||[];var i=function(){},o=function(){var r=this instanceof i?this:e;return u(t,r,n.concat(d.slice(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}function u(t,e,n){switch(void 0===n&&(n=[]),n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);default:return t.apply(e,n)}}function c(t,e){return f(t,e,[],[])}function a(t,e,n){var r=g.camelcase("on-"+e.replace(":","-"));t[r]&&"function"==typeof t[r]&&u(t[r],t,n),"function"==typeof t.trigger&&(n=[e].concat(n),u(t.trigger,t,n))}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(p.isObject(r)&&r[t])return r[t]}return null}function h(t,e,n){var r;r=e&&p.has(e,"constructor")?e.constructor:function(){return t.apply(this,arguments)},p.extend(r,t,n);var i=function(){this.constructor=r};return i.prototype=t.prototype,r.prototype=new i,e&&p.extend(r.prototype,e),r.__super__=t.prototype,r}function f(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var i=toString.call(t);if(i!=toString.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t===1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var s=t.constructor,u=e.constructor;if(s!==u&&!("function"==typeof s&&s instanceof s&&"function"==typeof u&&u instanceof u))return!1;n.push(t),r.push(e);var c=0,a=!0;if("[object Array]"===i){if(c=t.length,a=c===e.length)for(;c--&&(a=f(t[c],e[c],n,r)););}else{for(var l in t)if(p.has(t,l)&&(c++,!(a=p.has(e,l)&&f(t[l],e[l],n,r))))break;if(a){for(l in e)if(p.has(e,l)&&!c--)break;a=!c}}return n.pop(),r.pop(),a}var p=n(29),d=n(30),g=n(31),v=0,y=Function.prototype.bind;e.ajax=r,e.uniqueId=i,e.proxy=o,e.bind=s,e.callFunc=u,e.equal=c,e.triggerMethodOn=a,e.getOption=l,e.inherits=h,e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}()},function(t,e,n){function r(t){return t===Object(t)}function i(t){return 0===Object.keys(t).length}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!r(t))return t;for(var i,o,s=0;s<e.length;s++)if(i=e[s],r(i))for(o in i)u(i,o)&&(t[o]=i[o]);return t}function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),i=0,o=e.length;o>i;i++){var s=e[i];if(void 0!==s&&null!==s){s=Object(s);for(var u=Object.keys(Object(s)),c=0,a=u.length;a>c;c++){var l=u[c],h=Object.getOwnPropertyDescriptor(s,l);void 0!==h&&h.enumerable&&(r[l]=s[l])}}}return r}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n,r={},i=0;i<e.length;i++)n=e[i],u(t,n)&&(r[n]=t[n]);return r}function a(t,e,n,r){var i=t[e];return"function"==typeof i?p.callFunc(i,n,r||[]):i}function l(t){var e=[];for(var n in t)u(t,n)&&e.push(t[n]);return e}function h(t,e,n){for(var r,i,o=[],s=0,u=t.length;u>s;s++)r=t[s],i=d.any(e,function(t){return n(t,r)}),i&&o.push(r);return o}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[e.length-1],i=e.length,o=p.equal;"function"==typeof r&&(o=r,i--);for(var s=0;i>s;s++){var u=e[s];if(t=h(t,u,o),0===t.length)break}return t}var p=n(28),d=n(30);e.isObject=r,e.isEmpty=i,e.extend=o,e.assign=s,e.has=u,e.pick=c,e.result=a,e.values=l,e.intersection=f},function(t,e,n){function r(t){return t.filter(function(e,n){for(n+=1;n<t.length;n+=1)if(l.equal(e,t[n]))return!1;return!0})}function i(t,e){for(var n=0,r=t.length;r>n;n++)if(e(t[n]))return!0;return!1}function o(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function s(t,e,n){var r,i;for(r=0;r<t.length;r++)if(i=t[r],e.call(n,i))return i;return null}function u(t,e,n){return Array.prototype.slice.call(t,e,n)}function c(t){return t.reduce(function(t,e){return t.concat(Array.isArray(e)?c(e):e)},[])}function a(t,e,n){var r="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}).map(function(t){return t.value})}var l=n(28);e.unique=r,e.any=i,e.indexOf=o,e.find=s,e.slice=u,e.flatten=c,e.sortBy=a},function(t,e){function n(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function r(t,e){var n=t.substring(0,Math.min(e,t.length));return n+(n.length==t.length?"":"...")}function i(t,e){void 0===e&&(e=!1);var n=e?1e3:1024;if(Math.abs(t)<n)return t+" B";var r=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do t/=n,++i;while(Math.abs(t)>=n&&i<r.length-1);return t.toFixed(1)+" "+r[i]}e.camelcase=n,e.truncate=r,e.humanFileSize=i},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=n(26),o=n(28),s=n(29),u=function(t){function e(e,n){void 0===e&&(e={}),n=n||{},this._attributes=e,this.uid=o.uniqueId("uid"),this._changed={},this.collection=n.collection,t.call(this)}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.idAttribute in this._attributes?this._attributes[this.idAttribute]:this.uid},enumerable:!0,configurable:!0}),e.prototype.set=function(t,e,n){void 0===n&&(n={});var r,i,u,c,a,l,h,f={};if(null==t)return this;"object"==typeof t?(f=t,n=e):f[t]=e,n||(n={}),i=n.unset,c=n.silent,u=[],a=this._changing,this._changing=!0,a||(this._previousAttributes=s.extend(Object.create(null),this._attributes),this._changed={}),h=this._attributes,l=this._previousAttributes;for(r in f)e=f[r],o.equal(h[r],e)||u.push(r),o.equal(l[r],e)?delete this._changed[r]:this._changed[r]=e,i?delete h[r]:h[r]=e;if(!c){u.length&&(this._pending=!!n);for(var p=0,d=u.length;d>p;p++)this.trigger("change:"+u[p],this,h[u[p]],n)}if(a)return this;if(!c)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},e.prototype.get=function(t){return this._attributes[t]},e.prototype.unset=function(t,e){this.set(t,void 0,s.extend({},e,{unset:!0}))},e.prototype.has=function(t){return null!=this.get(t)},e.prototype.hasChanged=function(t){return null==t?!!Object.keys(this.changed).length:s.has(this.changed,t)},e.prototype.clear=function(t){var e={};for(var n in this._attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},Object.defineProperty(e.prototype,"changed",{get:function(){return s.extend({},this._changed)},enumerable:!0,configurable:!0}),e.prototype.changedAttributes=function(t){if(!t)return this.hasChanged()?s.extend(Object.create(null),this.changed):!1;var e,n={},r=this._changing?this._previousAttributes:this._attributes;for(var i in t)o.equal(r[i],e=t[i])||((n||(n={}))[i]=e);return n},e.prototype.previous=function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},e.prototype.previousAttributes=function(){return s.extend(Object.create(null),this._previousAttributes)},e.prototype.toJSON=function(){return JSON.parse(JSON.stringify(this._attributes))},e.prototype.clone=function(){return new this.constructor(this._attributes)},e}(i.BaseObject);e.Model=u},function(t,e,n){function r(t,e){void 0===e&&(e=".");var n={};for(var i in t){var o=t[i];if(!o||o.constructor!==Object&&o.constructor!==Array||a.isEmpty(o))n[i]=o;else{var s=r(o);for(var u in s){var c=s[u];n[i+e+u]=c}}}return n}function i(t,e,n,r){void 0===r&&(r=".");for(var i=e?e.split(r):[],o=t,s=0,u=i.length;u>s;s++){if(n&&!a.has(o,i[s]))return!1;if(o=o instanceof l.Model?o.get(i[s]):o[i[s]],null==o&&u-1>s&&(o={}),"undefined"==typeof o)return n?!0:o}return n?!0:o}function o(t,e,n,r){r=r||{};for(var i=r.separator||".",o=e?e.split(i):[],s=t,u=0,c=o.length;c>u&&void 0!==s;u++){var l=o[u];if(u===c-1)r.unset?delete s[l]:s[l]=n;else{if("undefined"==typeof s[l]||!a.isObject(s[l])){if(r.unset)return void delete s[l];var h=o[u+1];s[l]=/^\d+$/.test(h)?[]:{}}s=s[l]}}}function s(t,e){o(t,e,null,{unset:!0})}var u=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},c=n(28),a=n(29),l=n(32),h=function(t){function e(){t.apply(this,arguments)}return u(e,t),e.prototype.get=function(t){return i(this._attributes,t)},e.prototype.set=function(t,n,u){var l,h,f,p,d,g,v,y;if(null==t)return this;"object"==typeof t?(h=t,u=n||{}):(h={})[t]=n,u||(u={}),f=u.unset,d=u.silent,p=[],g=this._changing,this._changing=!0,g||(this._previousAttributes=a.extend({},this._attributes),this._changed={}),y=this._attributes,v=this._previousAttributes,this.idAttribute in h&&(this.id=h[this.idAttribute]),h=r(h);for(l in h)n=h[l],c.equal(i(y,l),n)||(p.push(l),this._changed[l]=n),c.equal(i(v,l),n)?s(this.changed,l):o(this.changed,l,n),f?s(y,l):o(y,l,n);if(!d){p.length&&(this._pending=!0);for(var m=e.keyPathSeparator,_={},b=0,w=p.length;w>b;b++){var E=p[b];_.hasOwnProperty(E)&&_[E]||(_[E]=!0,this.trigger("change:"+E,this,i(y,E),u));for(var O=E.split(m),x=O.length-1;x>0;x--){var j=O.slice(0,x).join(m),M=j+m+"*";_.hasOwnProperty(M)&&_[M]||(_[M]=!0,this.trigger("change:"+M,this,i(y,j),u)),_.hasOwnProperty(j)&&_[j]||(_[j]=!0,this.trigger("change:"+j,this,i(y,j),u))}}}if(g)return this;if(!d)for(;this._pending;)this._pending=!1,this.trigger("change",this,u);return this._pending=!1,this._changing=!1,this},e.prototype.clear=function(t){var e={},n=r(this._attributes);for(var i in n)e[i]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},e.prototype.hasChanged=function(t){return null==t?!Object.keys(this.changed).length:void 0!==i(this.changed,t)},e.prototype.changedAttributes=function(t){if(!t)return this.hasChanged()?r(this.changed):!1;var e=this._changing?this._previousAttributes:this._attributes;t=r(t),e=r(e);var n,i=!1;for(var o in t)c.equal(e[o],n=t[o])||((i||(i={}))[o]=n);return i},e.prototype.previous=function(t){return null!=t&&this._previousAttributes?i(this._previousAttributes,t):null},e.prototype.previousAttributes=function(){return a.extend({},this._previousAttributes)},e.keyPathSeparator=".",e}(l.Model);e.NestedModel=h},function(t,e){}])});