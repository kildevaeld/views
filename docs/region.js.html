<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: region.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: region.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* global BaseClass */
/* jshint latedef:nofunc */
import { BaseObject } from './object';
import { utils } from './utils';
/** Region  */
export class Region extends BaseObject {
    /**
     * Regions manage a view
     * @param {Object} options
     * @param {HTMLElement} options.el  A Html element
     * @constructor Region
     * @extends BaseObject
     * @inheritdoc
     */
    constructor(options) {
        this.options = options;
        this._el = this.getOption('el');
        super();
    }
    get view() {
        return this._view;
    }
    set view(view) {
        this.show(view);
    }
    get el() {
        return this._el;
    }
    /**
     * Build region from a definition
     * @param {Object|String|Region} def The description of the region
     * @return {Region}
     */
    static buildRegion(def, context = null) {
        if (def instanceof Region) {
            return def;
        }
        else if (typeof def === 'string') {
            return buildBySelector(def, Region, context);
        }
        else {
            return buildByObject(def, context);
        }
    }
    /**
   * Show a view in the region.
   * This will destroy or remove any existing views.
   * @param  {View} view    The view to Show
   * @return {Region}       this for chaining.
   */
    show(view, options) {
        let diff = view !== this._view;
        if (diff) {
            // Remove any containing views
            this.empty();
            // If the view is destroyed be others
            view.once('destroy', this.empty, this);
            view.once('render', () => {
                utils.triggerMethodOn(view, 'show');
            });
            view.render();
            utils.triggerMethodOn(view, 'before:show');
            this._attachHtml(view);
            this._view = view;
        }
        return this;
    }
    /**
     * Destroy the region, this will remove any views, but not the containing element
     * @return {Region} this for chaining
     */
    destroy() {
        this.empty();
        super.destroy();
    }
    /**
     * Empty the region. This will destroy any existing view.
     * @return {Region} this for chaining;
     */
    empty() {
        if (!this._view)
            return;
        let view = this._view;
        view.off('destroy', this.empty, this);
        this.trigger('before:empty', view);
        this._destroyView();
        this.trigger('empty', view);
        delete this._view;
        return this;
    }
    /**
     * Attach the view element to the regions element
     * @param {View} view
     * @private
     *
     */
    _attachHtml(view) {
        this._el.innerHTML = '';
        this._el.appendChild(view.el);
    }
    _destroyView() {
        let view = this._view;
        if ((view.destroy &amp;&amp; typeof view.destroy === 'function') &amp;&amp; !view.isDestroyed) {
            view.destroy();
        }
        else if (view.remove &amp;&amp; typeof view.remove === 'function') {
            view.remove();
        }
        this._el.innerHTML = '';
    }
}
function buildByObject(object = {}, context) {
    if (!object.selector)
        throw new Error('No selector specified: ' + object);
    return buildBySelector(object.selector, object.regionClass || Region, context);
}
function buildBySelector(selector, Klass = Region, context) {
    context = context || document;
    var el = context.querySelector(selector);
    if (!el)
        throw new Error('selector must exist in the dom');
    return new Klass({
        el: el
    });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="-_.html"></a></li><li><a href="BaseObject.html">BaseObject</a></li><li><a href="BaseView.html">BaseView</a></li><li><a href="CollectionView.html">CollectionView</a></li><li><a href="DataView.html">DataView</a></li><li><a href="LayoutView.html">LayoutView</a></li><li><a href="Region.html">Region</a></li><li><a href="RegionManager.html">RegionManager</a></li><li><a href="TemplateView.html">TemplateView</a></li><li><a href="View.html">View</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0-dev</a> on Thu Aug 13 2015 02:31:51 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
